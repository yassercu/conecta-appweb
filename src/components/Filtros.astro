---
const provincias = [
  "Pinar del Río", "Artemisa", "La Habana", "Mayabeque", "Matanzas", 
  "Villa Clara", "Cienfuegos", "Sancti Spíritus", "Ciego de Ávila", 
  "Camagüey", "Las Tunas", "Holguín", "Granma", "Santiago de Cuba", 
  "Guantánamo", "Isla de la Juventud"
];

const categorias = [
  "Gastronomía", "Alojamiento", "Reparaciones", "Transporte", 
  "Belleza", "Salud", "Educación", "Tecnología", "Construcción", 
  "Eventos", "Comercio", "Asesoría Legal", "Artesanía", "Limpieza"
];
---

<div class="bg-white rounded-lg shadow-md p-6 mb-6">
  <h2 class="text-xl font-semibold mb-4 text-gray-800">Filtros de búsqueda</h2>
  
  <form id="filtros-form" class="space-y-4">
    <div>
      <label for="busqueda" class="block text-sm font-medium text-gray-700 mb-1">Palabra clave</label>
      <input
        type="text"
        id="busqueda"
        name="busqueda"
        placeholder="¿Qué servicio buscas?"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      />
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label for="provincia" class="block text-sm font-medium text-gray-700 mb-1">Provincia</label>
        <select
          id="provincia"
          name="provincia"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        >
          <option value="">Todas las provincias</option>
          {provincias.map((provincia) => (
            <option value={provincia}>{provincia}</option>
          ))}
        </select>
      </div>
      
      <div>
        <label for="municipio" class="block text-sm font-medium text-gray-700 mb-1">Municipio</label>
        <select
          id="municipio"
          name="municipio"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          disabled
        >
          <option value="">Selecciona una provincia primero</option>
        </select>
      </div>
    </div>
    
    <div>
      <label for="categoria" class="block text-sm font-medium text-gray-700 mb-1">Categoría</label>
      <select
        id="categoria"
        name="categoria"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      >
        <option value="">Todas las categorías</option>
        {categorias.map((categoria) => (
          <option value={categoria}>{categoria}</option>
        ))}
      </select>
    </div>
    
    <div>
      <label for="distancia" class="block text-sm font-medium text-gray-700 mb-1">
        Distancia máxima: <span id="distancia-valor">5</span> km
      </label>
      <input
        type="range"
        id="distancia"
        name="distancia"
        min="1"
        max="50"
        value="5"
        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
      />
    </div>
    
    <div class="flex justify-end">
      <button
        type="submit"
        class="px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
      >
        Buscar
      </button>
    </div>
  </form>
</div>

<script>
  // Datos de municipios por provincia
  const municipiosPorProvincia = {
    "Pinar del Río": ["Consolación del Sur", "Guane", "La Palma", "Los Palacios", "Mantua", "Minas de Matahambre", "Pinar del Río", "San Juan y Martínez", "San Luis", "Sandino", "Viñales"],
    "Artemisa": ["Alquízar", "Artemisa", "Bauta", "Caimito", "Guanajay", "Güira de Melena", "Mariel", "San Antonio de los Baños", "Bahía Honda", "Candelaria", "San Cristóbal"],
    "La Habana": ["Arroyo Naranjo", "Boyeros", "Centro Habana", "Cerro", "Cotorro", "Diez de Octubre", "Guanabacoa", "Habana del Este", "Habana Vieja", "La Lisa", "Marianao", "Playa", "Plaza de la Revolución", "Regla", "San Miguel del Padrón"],
    // Aquí se añadirían los municipios de las demás provincias
  };

  // Actualizar el selector de municipios cuando cambia la provincia
  const provinciaSelect = document.getElementById('provincia');
  const municipioSelect = document.getElementById('municipio');
  
  if (provinciaSelect && municipioSelect) {
    provinciaSelect.addEventListener('change', () => {
      const provinciaSeleccionada = provinciaSelect.value;
      
      // Limpiar opciones actuales
      municipioSelect.innerHTML = '';
      
      if (provinciaSeleccionada) {
        // Habilitar selector de municipios
        municipioSelect.disabled = false;
        
        // Añadir opción por defecto
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = 'Todos los municipios';
        municipioSelect.appendChild(defaultOption);
        
        // Añadir municipios de la provincia seleccionada
        const municipios = municipiosPorProvincia[provinciaSeleccionada] || [];
        municipios.forEach(municipio => {
          const option = document.createElement('option');
          option.value = municipio;
          option.textContent = municipio;
          municipioSelect.appendChild(option);
        });
      } else {
        // Si no hay provincia seleccionada, desactivar el selector
        municipioSelect.disabled = true;
        
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = 'Selecciona una provincia primero';
        municipioSelect.appendChild(defaultOption);
      }
    });
  }

  // Actualizar el valor mostrado del slider de distancia
  const distanciaSlider = document.getElementById('distancia');
  const distanciaValor = document.getElementById('distancia-valor');
  
  if (distanciaSlider && distanciaValor) {
    distanciaSlider.addEventListener('input', () => {
      distanciaValor.textContent = distanciaSlider.value;
    });
  }
</script> 