<header id="navbar" class="fixed w-full z-50 transition-all duration-300">
  <div class="container mx-auto px-4">
    <!-- Skip to content link (visible only when focused) -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:bg-emerald-700 focus:text-white focus:px-4 focus:py-2 focus:z-50">
      Saltar al contenido principal
    </a>
    
    <!-- Barra principal con logo, búsqueda y acciones -->
    <div class="flex items-center justify-between py-4">
      <!-- Logo y nombre -->
      <div class="flex-shrink-0">
        <a href="/" class="flex items-center focus:outline-none" aria-label="Conecta - Página de inicio">
          <img src="/logo.svg" alt="Conecta Logo" class="h-10 w-10" />
          <h1 class="text-xl font-bold ml-2 text-white">Conecta</h1>
        </a>
      </div>
      
      <!-- Buscador central con dos campos -->
      <div class="hidden lg:flex flex-1 max-w-3xl mx-8">
        <div class="w-full bg-white rounded-full overflow-hidden shadow-md flex">
          <div class="flex-1 border-r border-gray-200">
            <input 
              type="text" 
              placeholder="Servicio"
              class="w-full pl-6 pr-4 py-2 text-gray-800 focus:outline-none"
              aria-label="Buscar por tipo de servicio"
            />
          </div>
          <div class="flex-1">
            <input 
              type="text" 
              placeholder="Dirección"
              class="w-full pl-4 pr-4 py-2 text-gray-800 focus:outline-none"
              aria-label="Buscar por ubicación"
            />
          </div>
          <button
            type="submit"
            class="bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 focus:outline-none transition"
            aria-label="Buscar"
          >
            Buscar
          </button>
        </div>
      </div>
      
      <!-- Acciones a la derecha -->
      <div class="flex items-center space-x-4">
        <a href="/registro" class="hidden md:block text-white hover:text-emerald-100 font-medium px-4 py-2 rounded-full transition-all duration-300">
          Ofrecer servicios
        </a>
        <a href="/acceso" class="hidden md:block bg-white/90 text-emerald-700 hover:bg-white font-medium px-5 py-2 rounded-full shadow-sm transition-all duration-300">
          Acceso
        </a>
        
        <!-- Botón móvil -->
        <button id="mobile-menu-button" class="lg:hidden p-2 rounded-full hover:bg-white/10 focus:outline-none transition-all duration-300" aria-expanded="false" aria-controls="mobile-menu" aria-label="Abrir menú">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white transition-colors duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
    
    <!-- Navegación de categorías -->
    <nav aria-label="Categorías principales" class="py-3 overflow-x-auto whitespace-nowrap scrollbar-hide">
      <ul class="flex space-x-1 md:space-x-4 md:justify-center" role="menubar">
        <li role="none">
          <a href="/" class="flex flex-col items-center px-3 py-2 text-white hover:bg-white/10 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-current focus:ring-offset-1" role="menuitem">
            <span class="flex items-center justify-center bg-white/20 rounded-full p-2 mb-1 transition-all duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white transition-colors duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
              </svg>
            </span>
            <span class="text-sm font-medium">Inicio</span>
          </a>
        </li>
        <li role="none">
          <a href="/servicios" class="flex flex-col items-center px-3 py-2 text-white hover:bg-white/10 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-1" role="menuitem">
            <span class="flex items-center justify-center bg-white/20 rounded-full p-2 mb-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
              </svg>
            </span>
            <span class="text-sm font-medium">Servicios</span>
          </a>
        </li>
        <li role="none">
          <a href="/deportes" class="flex flex-col items-center px-3 py-2 text-white hover:bg-white/10 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-1" role="menuitem">
            <span class="flex items-center justify-center bg-white/20 rounded-full p-2 mb-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8a6 6 0 016 6v8h-6v-8a6 6 0 00-6-6H6a6 6 0 00-6 6v8h6v-8a6 6 0 016-6z" />
              </svg>
            </span>
            <span class="text-sm font-medium">Deportes</span>
          </a>
        </li>
        <li role="none">
          <a href="/otros" class="flex flex-col items-center px-3 py-2 text-white hover:bg-white/10 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-1" role="menuitem">
            <span class="flex items-center justify-center bg-white/20 rounded-full p-2 mb-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z" />
              </svg>
            </span>
            <span class="text-sm font-medium">Otros</span>
          </a>
        </li>
        <li role="none">
          <a href="/cuidados" class="flex flex-col items-center px-3 py-2 text-white hover:bg-white/10 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-1" role="menuitem">
            <span class="flex items-center justify-center bg-white/20 rounded-full p-2 mb-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
              </svg>
            </span>
            <span class="text-sm font-medium">Cuidados</span>
          </a>
        </li>
        <li role="none">
          <a href="/belleza" class="flex flex-col items-center px-3 py-2 text-white hover:bg-white/10 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-1" role="menuitem">
            <span class="flex items-center justify-center bg-white/20 rounded-full p-2 mb-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z" />
              </svg>
            </span>
            <span class="text-sm font-medium">Belleza</span>
          </a>
        </li>
        <li role="none">
          <a href="/mascotas" class="flex flex-col items-center px-3 py-2 text-white hover:bg-white/10 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-1" role="menuitem">
            <span class="flex items-center justify-center bg-white/20 rounded-full p-2 mb-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5" />
              </svg>
            </span>
            <span class="text-sm font-medium">Mascotas</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Menú móvil -->
  <div id="mobile-menu" class="hidden lg:hidden bg-emerald-600 border-t border-white/10" role="menu">
    <div class="container mx-auto px-4 py-4 flex flex-col space-y-4">
      <!-- Buscador en móvil -->
      <div class="bg-white rounded-full overflow-hidden shadow-md flex">
        <input 
          type="text" 
          placeholder="Buscar servicios o dirección..."
          class="w-full pl-4 pr-4 py-2 text-gray-800 focus:outline-none"
        />
        <button
          type="submit"
          class="bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 focus:outline-none transition"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </button>
      </div>
      
      <!-- Enlaces de navegación para móvil -->
      <a href="/" class="block py-2 px-3 text-white hover:bg-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-white" role="menuitem">Inicio</a>
      <a href="/servicios" class="block py-2 px-3 text-white hover:bg-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-white" role="menuitem">Servicios</a>
      <a href="/categorias" class="block py-2 px-3 text-white hover:bg-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-white" role="menuitem">Categorías</a>
      <a href="/mapa" class="block py-2 px-3 text-white hover:bg-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-white" role="menuitem">Mapa</a>
      <a href="/contacto" class="block py-2 px-3 text-white hover:bg-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-white" role="menuitem">Contacto</a>
      <a href="/registro" class="block py-2 px-3 text-white bg-emerald-500 hover:bg-emerald-600 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-white" role="menuitem">Ofrecer servicios</a>
      <a href="/acceso" class="block py-2 px-3 bg-white text-emerald-600 hover:bg-emerald-50 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-emerald-600" role="menuitem">Acceso</a>
    </div>
  </div>
</header>

<script>
  // Manejar el botón del menú móvil
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      const expanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
      mobileMenuButton.setAttribute('aria-expanded', expanded ? 'false' : 'true');
      mobileMenu.classList.toggle('hidden');
      
      // Cambiar el ícono cuando se abre/cierra el menú
      if (!expanded) {
        mobileMenuButton.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        `;
        mobileMenuButton.setAttribute('aria-label', 'Cerrar menú');
      } else {
        mobileMenuButton.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        `;
        mobileMenuButton.setAttribute('aria-label', 'Abrir menú');
      }
    });
    
    // Cerrar menú con la tecla Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && mobileMenu.classList.contains('hidden') === false) {
        mobileMenu.classList.add('hidden');
        mobileMenuButton.setAttribute('aria-expanded', 'false');
        mobileMenuButton.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        `;
        mobileMenuButton.setAttribute('aria-label', 'Abrir menú');
        mobileMenuButton.focus();
      }
    });
  }
  
  // Efecto de cambio de color al hacer scroll
  const navbar = document.getElementById('navbar');
  const handleScroll = () => {
    if (navbar) {
      const banner = document.querySelector('section.bg-gradient-to-br');
      const bannerHeight = banner ? (banner as HTMLElement).offsetHeight : 0;
      const bannerTop = banner ? (banner as HTMLElement).offsetTop : 0;
      
      // Seleccionar todos los elementos que necesitan cambiar de color
      const whiteTextElements = navbar.querySelectorAll('.text-white, h1, svg, .text-sm');
      const iconBackgrounds = navbar.querySelectorAll('span[class*="bg-white"], span[class*="bg-emerald"]');
      const loginButton = navbar.querySelector('a[href="/acceso"]');
      
      if (window.scrollY <= 20) {
        // Al inicio de la página: transparente
        navbar.classList.remove('bg-emerald-600', 'bg-white', 'shadow-md');
        navbar.classList.add('bg-transparent');
        
        // Restaurar colores originales de textos e iconos
        whiteTextElements.forEach(el => {
          el.classList.remove('text-gray-800', 'text-emerald-700');
          el.classList.add('text-white');
        });
        
        // Restaurar fondos de los círculos de los iconos
        iconBackgrounds.forEach(el => {
          // Remover todas las posibles clases de fondo que se hayan aplicado
          el.classList.remove('bg-emerald-100', 'bg-emerald-200', 'bg-emerald-50');
          // Asegurar que tenga la clase de fondo semitransparente
          if (!el.classList.contains('bg-white/20')) {
            el.classList.add('bg-white/20');
          }
        });
        
        if (loginButton) {
          loginButton.classList.remove('bg-emerald-600', 'text-white', 'hover:bg-emerald-700');
          loginButton.classList.add('bg-white/90', 'text-emerald-700', 'hover:bg-white');
        }
        
      } else if (banner && window.scrollY < bannerTop + bannerHeight - 100) {
        // Sobre el banner: fondo verde
        navbar.classList.add('bg-emerald-600', 'shadow-md');
        navbar.classList.remove('bg-transparent', 'bg-white');
        
        whiteTextElements.forEach(el => {
          el.classList.remove('text-gray-800');
          el.classList.add('text-white');
        });
        
        iconBackgrounds.forEach(el => {
          el.classList.remove('bg-emerald-100', 'bg-emerald-200', 'bg-emerald-50');
          el.classList.add('bg-white/20');
        });
        
        if (loginButton) {
          loginButton.classList.remove('bg-emerald-600', 'text-white', 'hover:bg-emerald-700');
          loginButton.classList.add('bg-white/90', 'text-emerald-700', 'hover:bg-white');
        }
        
      } else {
        // Sobre el contenido: fondo blanco
        navbar.classList.add('bg-white', 'shadow-md');
        navbar.classList.remove('bg-transparent', 'bg-emerald-600');
        
        whiteTextElements.forEach(el => {
          const closestButton = el.closest('.bg-emerald-500, .bg-emerald-600');
          if (!closestButton) {
            el.classList.remove('text-white');
            el.classList.add('text-gray-800');
          }
        });
        
        iconBackgrounds.forEach(el => {
          el.classList.remove('bg-white/20');
          el.classList.add('bg-emerald-100');
        });
        
        if (loginButton) {
          loginButton.classList.remove('bg-white/90', 'text-emerald-700', 'hover:bg-white');
          loginButton.classList.add('bg-emerald-600', 'text-white', 'hover:bg-emerald-700');
        }
      }
    }
  };
  
  // Asegurarse de que el estado inicial sea correcto
  window.addEventListener('load', handleScroll);
  
  // Usar requestAnimationFrame para una transición más suave
  let ticking = false;
  window.addEventListener('scroll', () => {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        handleScroll();
        ticking = false;
      });
      ticking = true;
    }
  });
</script>

<style>
  /* Ocultar scrollbar pero permitir desplazamiento */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
  }
</style>