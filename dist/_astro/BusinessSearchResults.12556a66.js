import{_ as I,S as v,a as N,b as k,c as b,d as i}from"./select.f9281a84.js";import{j as e}from"./utils.cba2a83f.js";import{r as t}from"./index.7050ffa8.js";import{C as S,a as V}from"./card.5c9e26d9.js";import{Badge as E}from"./badge.aa4352d0.js";import{B as g}from"./button.106a523c.js";import{S as C}from"./skeleton.d47ea41f.js";import"./input.e1ecff9e.js";import{a as P,b as U}from"./data.745a8473.js";import{c as p}from"./createLucideIcon.b27e170f.js";import{S as M}from"./star.82d476e8.js";import{M as O}from"./menu.721a9d0e.js";import{M as G}from"./map-pin.3ff91f5a.js";import"./index.e2f97c53.js";import"./index.5fb5c8e9.js";import"./index.cb6cfaa2.js";import"./index.9370a71d.js";import"./index.1bd49a93.js";import"./index.7f78662f.js";import"./index.8f609134.js";import"./index.eb6f9136.js";import"./index.3dde182b.js";import"./index.261dcdfd.js";import"./index.7ef91352.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],Z=p("ArrowDownUp",Q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],J=p("Filter",H);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],W=p("Grid3x3",K);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Y=p("List",X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],re=p("LocateFixed",ee),se=t.lazy(()=>I(()=>import("./index.16bdc10b.js"),["_astro/index.16bdc10b.js","_astro/utils.cba2a83f.js","_astro/index.7050ffa8.js","_astro/skeleton.d47ea41f.js","_astro/button.106a523c.js","_astro/index.9370a71d.js","_astro/index.7ef91352.js","_astro/index.8f609134.js","_astro/index.e2f97c53.js","_astro/createLucideIcon.b27e170f.js","_astro/loader-circle.ea940e81.js","_astro/map-pin.3ff91f5a.js","_astro/x.deec9580.js","_astro/house.38e72fb6.js"]));async function ae(r){await new Promise(a=>setTimeout(a,800));let o=U.filter(a=>(a.name.toLowerCase().includes(r.query.toLowerCase())||a.category.toLowerCase().includes(r.query.toLowerCase())||a.description.toLowerCase().includes(r.query.toLowerCase()))&&(r.category==="Todas"||a.category===r.category)&&(r.rating==="0"||a.rating>=parseInt(r.rating)));return r.sortBy==="rating"?o.sort((a,l)=>a.promoted!==l.promoted?a.promoted?-1:1:l.rating-a.rating||a.name.localeCompare(l.name)):r.sortBy==="name"?o.sort((a,l)=>a.promoted!==l.promoted?a.promoted?-1:1:a.name.localeCompare(l.name)):o.sort((a,l)=>a.promoted!==l.promoted?a.promoted?-1:1:0),o}function te({business:r}){return e.jsx(S,{className:`overflow-hidden group relative border-primary/10 bg-card/80 backdrop-blur-sm rounded-xl 
      shadow-sm hover:shadow-md hover:shadow-primary/5 transition-all duration-300 flex flex-col
      hover:scale-[1.02] hover:-translate-y-1`,children:e.jsxs("a",{href:`/business/${r.id}`,className:"block",children:[e.jsxs("div",{className:"relative aspect-square",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary/30 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.promoted&&e.jsx("div",{className:"absolute top-2 right-2 animate-orbit-small",children:e.jsx(E,{className:`bg-primary/90 hover:bg-primary text-primary-foreground text-[8px] md:text-[10px] px-1.5 py-0.5 
                rounded-full shadow-lg shadow-primary/20 border-none backdrop-blur-sm`,children:"★ DESTACADO"})})]}),e.jsxs(V,{className:"p-2 md:p-3 flex-grow flex flex-col justify-end",children:[e.jsx("h3",{className:"font-semibold text-xs md:text-sm truncate group-hover:text-primary transition-colors",children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] md:text-xs mt-0.5",children:[e.jsx(M,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"font-medium",children:r.rating.toFixed(1)}),e.jsx("span",{className:"text-primary/40",children:"•"}),e.jsx("span",{className:"text-muted-foreground truncate",children:r.category})]})]})]})})}function le({business:r}){return e.jsx(S,{className:`overflow-hidden group relative border-primary/10 bg-card/80 backdrop-blur-sm rounded-xl 
      shadow-sm hover:shadow-md hover:shadow-primary/5 transition-all duration-300
      hover:scale-[1.01] hover:-translate-y-1`,children:e.jsxs("a",{href:`/business/${r.id}`,className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"relative md:w-[120px] lg:w-[150px]",children:[e.jsxs("div",{className:"aspect-square md:h-full",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary/30 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),r.promoted&&e.jsx("div",{className:"absolute top-2 right-2 animate-orbit-small",children:e.jsx(E,{className:`bg-primary/90 hover:bg-primary text-primary-foreground text-[8px] md:text-[10px] px-1.5 py-0.5 
                rounded-full shadow-lg shadow-primary/20 border-none backdrop-blur-sm`,children:"★ DESTACADO"})})]}),e.jsxs(V,{className:"p-3 flex-grow md:w-auto",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-xs md:text-sm truncate group-hover:text-primary transition-colors",children:r.name}),e.jsxs("div",{className:"flex items-center gap-1 text-[9px] md:text-xs mt-0.5",children:[e.jsx("span",{className:"text-muted-foreground truncate",children:r.category}),e.jsx("span",{className:"text-primary/40",children:"•"}),e.jsx(G,{className:"h-3 w-3"})," ",e.jsx("span",{className:"truncate",children:r.location})]})]}),e.jsxs("div",{className:"flex items-center gap-0.5 text-yellow-500",children:[e.jsx(M,{className:"h-3 w-3 fill-current"}),e.jsx("span",{className:"font-medium text-foreground",children:r.rating.toFixed(1)})]})]}),r.description&&e.jsx("p",{className:"text-[9px] md:text-xs text-muted-foreground pt-1 line-clamp-1",children:r.description})]})]})})}function Be(){const[r,o]=t.useState(""),[a,l]=t.useState("Todas"),[d,h]=t.useState("0"),[m,f]=t.useState("rating"),[n,y]=t.useState(!1),[c,j]=t.useState("grid"),[u,L]=t.useState([]),[q,_]=t.useState(!0),[T,R]=t.useState(!1);t.useEffect(()=>{R(!0)},[]),t.useEffect(()=>{try{const s=new URLSearchParams(window.location.search),x=s.get("query")||"",w=s.get("category")||"Todas",$=s.get("rating")||"0",F=s.get("sort")||"rating",z=s.get("view")||"list",D=s.get("viewMode")||"grid";o(x),l(w),h($),f(F),y(z==="map"),j(D)}catch{o(""),l("Todas"),h("0"),f("rating"),y(!1),j("grid")}},[]),t.useEffect(()=>{async function s(){try{_(!0);const w=await ae({query:r,category:a,rating:d,sortBy:m});L(w)}catch{L([])}finally{_(!1)}}s()},[r,a,d,m]),t.useEffect(()=>{try{const s=new URLSearchParams;r&&s.set("query",r),s.set("category",a),s.set("rating",d),s.set("sort",m),s.set("view",n?"map":"list"),s.set("viewMode",c),window.history.replaceState(null,"",`${window.location.pathname}?${s.toString()}`)}catch(s){console.error("Error al actualizar la URL:",s)}},[r,a,d,m,n,c]);const A=()=>{j(c==="grid"?"list":"grid")},B=s=>{y(s)};return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 p-4 bg-muted/50 rounded-lg border",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx(J,{className:"h-5 w-5 text-muted-foreground hidden md:inline"}),e.jsxs(v,{value:a,onValueChange:l,children:[e.jsx(N,{className:"w-full sm:w-[180px] bg-background",children:e.jsx(k,{placeholder:"Categoría"})}),e.jsx(b,{children:P.map(s=>e.jsx(i,{value:s,children:s},s))})]}),e.jsxs(v,{value:d,onValueChange:h,children:[e.jsxs(N,{className:"w-full sm:w-[170px] bg-background",children:[e.jsx(M,{className:"h-4 w-4 mr-1 inline-block text-yellow-500 fill-current"}),e.jsx(k,{placeholder:"Valoración"})]}),e.jsxs(b,{children:[e.jsx(i,{value:"0",children:"Cualquiera"}),e.jsx(i,{value:"4",children:"4+ Estrellas"}),e.jsx(i,{value:"3",children:"3+ Estrellas"}),e.jsx(i,{value:"2",children:"2+ Estrellas"}),e.jsx(i,{value:"1",children:"1+ Estrellas"})]})]}),e.jsxs(v,{value:m,onValueChange:f,children:[e.jsxs(N,{className:"w-full sm:w-[160px] bg-background",children:[e.jsx(Z,{className:"h-4 w-4 mr-1 inline-block"}),e.jsx(k,{placeholder:"Ordenar por"})]}),e.jsxs(b,{children:[e.jsx(i,{value:"rating",children:"Valoración"}),e.jsx(i,{value:"name",children:"Nombre (A-Z)"})]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[!n&&e.jsx(g,{variant:c==="grid"?"default":"outline",onClick:A,className:"flex-1 md:flex-initial",children:c==="grid"?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"mr-2 h-4 w-4"})," Cuadrícula"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Lista"]})}),e.jsxs(g,{variant:n?"outline":"default",onClick:()=>B(!1),className:`flex-1 md:flex-initial ${n?"":"hidden"}`,children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," Resultados"]}),e.jsxs(g,{variant:n?"default":"outline",onClick:()=>B(!0),className:"flex-1 md:flex-initial",children:[e.jsx(re,{className:"mr-2 h-4 w-4"})," Mapa"]})]})]}),n?e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 sr-only",children:"Vista de Mapa"}),e.jsx(S,{className:"h-[500px] flex items-center justify-center bg-muted text-muted-foreground rounded-lg overflow-hidden border",children:T?e.jsx(t.Suspense,{fallback:e.jsxs("div",{className:"flex items-center justify-center w-full h-full",children:[e.jsx("p",{children:"Cargando mapa..."}),e.jsx(C,{className:"h-[500px] w-full rounded-lg"})]}),children:e.jsx("div",{className:"w-full h-full",children:e.jsx(se,{businesses:u})})}):e.jsxs("div",{className:"flex items-center justify-center w-full h-full",children:[e.jsx("p",{children:"Esperando navegador..."}),e.jsx(C,{className:"h-[500px] w-full rounded-lg"})]})})]}):e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 sr-only",children:"Resultados"}),q?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-4",children:[...Array(10)].map((s,x)=>e.jsx(C,{className:"h-56 rounded-lg"},x))}):u.length>0?c==="grid"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-4",children:u.map(s=>e.jsx(te,{business:s},s.id))}):e.jsx("div",{className:"flex flex-col gap-4",children:u.map(s=>e.jsx(le,{business:s},s.id))}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("p",{className:"text-lg text-muted-foreground",children:"No se encontraron negocios con los filtros seleccionados."}),e.jsx(g,{onClick:()=>{o(""),l("Todas"),h("0")},variant:"link",className:"mt-2",children:"Limpiar filtros"})]})]})]})}export{Be as default};
