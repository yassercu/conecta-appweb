import{j as e}from"./utils.1a4f1886.js";import"./index.a383d3d5.js";import{u as y,a as v,P}from"./PaymentForm.77ef6d9b.js";import{B as i}from"./button.45d40932.js";import{L as C}from"./label.ddf0c103.js";import{I as M}from"./input.10ac0355.js";import{c}from"./createLucideIcon.42681ef6.js";import"./index.d7d0bd85.js";import"./Combination.0f3a16b0.js";import"./index.a27a3ea7.js";import"./index.4dc25dbf.js";import"./index.626d0927.js";import"./card.9cf3ca2d.js";import"./index.3cab87fc.js";import"./credit-card.85f76a2c.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M5 12h14",key:"1ays0h"}]],b=c("Minus",N);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],I=c("Plus",g);function H({product:a,quantity:t=1,isOpen:m,onClose:l,onSuccess:p,onError:d,onQuantityChange:u,maxQuantity:s=99}){const{toast:r}=y(),{error:k,handlePaymentComplete:h}=v({onSuccess:o=>{r({title:"¡Pago exitoso!",description:"Tu pedido ha sido procesado correctamente."}),p?.(o)},onError:o=>{r({variant:"destructive",title:"Error en el pago",description:o.message}),d?.(o)}}),n=o=>{const f=Math.min(Math.max(1,o),s);u?.(f)},x=a.price*t,j=()=>e.jsxs("div",{className:"flex flex-col space-y-2 mb-4",children:[e.jsx(C,{htmlFor:"quantity",children:"Cantidad"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{type:"button",variant:"outline",size:"icon",onClick:()=>n(t-1),disabled:t<=1,children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx(M,{id:"quantity",type:"number",min:"1",max:s,value:t,onChange:o=>n(parseInt(o.target.value)||1),className:"w-20 text-center"}),e.jsx(i,{type:"button",variant:"outline",size:"icon",onClick:()=>n(t+1),disabled:t>=s,children:e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(Máx: ",s,")"]})]})]});return e.jsx(P,{isOpen:m,onClose:l,amount:x,currency:"USD",concept:`${t}x ${a.name}`,onPaymentComplete:h,customerInfo:null,metadata:{productId:a.id,quantity:t,type:"product_purchase"},extraContent:e.jsx(j,{})})}export{H as ProductPaymentForm};
