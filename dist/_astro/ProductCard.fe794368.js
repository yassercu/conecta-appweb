import{j as e}from"./utils.1a4f1886.js";import{r as n}from"./index.a383d3d5.js";import{C as x,b as f,c as h,d as u,a as j,e as g}from"./card.9cf3ca2d.js";import{B as y}from"./button.45d40932.js";import{B as C}from"./badge.347109ca.js";import{ProductPaymentForm as b}from"./ProductPaymentForm.f8b6d481.js";import{u as N}from"./PaymentForm.77ef6d9b.js";import"./index.3cab87fc.js";import"./label.ddf0c103.js";import"./index.a27a3ea7.js";import"./index.4dc25dbf.js";import"./input.10ac0355.js";import"./createLucideIcon.42681ef6.js";import"./index.d7d0bd85.js";import"./Combination.0f3a16b0.js";import"./index.626d0927.js";import"./credit-card.85f76a2c.js";function R({product:s,businessId:r}){const[l,a]=n.useState(!1),[m,c]=n.useState(1),{toast:o}=N(),t=s.inStock??!0,d=i=>{o({title:"Â¡Compra exitosa!",description:"Tu pedido ha sido procesado correctamente."}),a(!1)},p=i=>{o({variant:"destructive",title:"Error en la compra",description:i.message})};return e.jsxs(e.Fragment,{children:[e.jsxs(x,{className:"overflow-hidden h-full flex flex-col",children:[e.jsxs("a",{href:r?`/business/${r}?product=${s.id}`:"#",className:"block",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}),e.jsx(C,{variant:t?"secondary":"outline",className:"absolute top-2 right-2",children:t?"Disponible":"Agotado"})]}),e.jsxs(f,{className:"pb-2",children:[e.jsx(h,{className:"text-lg",children:s.name}),e.jsx(u,{children:s.category})]}),e.jsx(j,{className:"pb-2 flex-grow",children:e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})})]}),e.jsxs(g,{className:"flex justify-between items-center pt-0",children:[e.jsxs("span",{className:"font-semibold",children:["$",s.price.toFixed(2)]}),e.jsx(y,{size:"sm",onClick:()=>a(!0),disabled:!t,children:t?"Ordenar":"Agotado"})]})]}),e.jsx(b,{product:s,quantity:m,isOpen:l,onClose:()=>a(!1),onSuccess:d,onError:p,onQuantityChange:c,maxQuantity:s.maxQuantity})]})}export{R as ProductCard};
