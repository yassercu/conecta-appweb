import{j as e}from"./utils.4700314a.js";import{r as m}from"./index.ba1407fb.js";import{C as x,b as f,c as h,d as u,a as j,e as g}from"./card.76bb78a3.js";import{B as y}from"./button.24a09aef.js";import{B as C}from"./badge.5aff5ef2.js";import{ProductPaymentForm as N}from"./ProductPaymentForm.4ffd2adc.js";import{u as b}from"./PaymentForm.c5139f06.js";import"./index.aa7e84ef.js";import"./index.7640c394.js";import"./input.38b38b9a.js";import"./label.06ff4936.js";import"./index.2229f0e2.js";import"./index.5c5fab55.js";import"./data.a7dc0bf8.js";import"./createLucideIcon.5c021b84.js";import"./index.bc2c71f5.js";import"./index.bc1dd6cd.js";import"./index.0a899574.js";import"./index.2ab59327.js";import"./index.6af11c90.js";import"./index.48db0fbf.js";import"./x.cbcf9f3b.js";import"./use-toast.3ee98f37.js";import"./credit-card.a6dcc7f6.js";import"./alert-dialog.6859f6df.js";function W({product:t,businessId:r}){const[n,a]=m.useState(!1),[l,c]=m.useState(1),{toast:o}=b(),s=t.inStock??!0,p=i=>{o({title:"Â¡Compra exitosa!",description:"Tu pedido ha sido procesado correctamente."}),a(!1)},d=i=>{o({variant:"destructive",title:"Error en la compra",description:i.message})};return e.jsxs(e.Fragment,{children:[e.jsxs(x,{className:"overflow-hidden h-full flex flex-col",children:[e.jsxs("a",{href:r?`/business/${r}?product=${t.id}`:"#",className:"block",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}),e.jsx(C,{variant:s?"secondary":"outline",className:"absolute top-2 right-2",children:s?"Disponible":"Agotado"})]}),e.jsxs(f,{className:"pb-2",children:[e.jsx(h,{className:"text-lg",children:t.name}),e.jsx(u,{children:t.category})]}),e.jsx(j,{className:"pb-2 flex-grow",children:e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description})})]}),e.jsxs(g,{className:"flex justify-between items-center pt-0",children:[e.jsxs("span",{className:"font-semibold",children:["$",t.price.toFixed(2)]}),e.jsx(y,{size:"sm",onClick:()=>a(!0),disabled:!s,children:s?"Ordenar":"Agotado"})]})]}),e.jsx(N,{product:t,quantity:l,isOpen:n,onClose:()=>a(!1),onSuccess:p,onError:d,onQuantityChange:c,maxQuantity:t.maxQuantity,businessId:r})]})}export{W as ProductCard};
