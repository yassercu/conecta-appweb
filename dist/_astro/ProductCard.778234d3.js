import{j as e}from"./utils.cba2a83f.js";import{r as m}from"./index.7050ffa8.js";import{C as x,b as f,c as h,d as u,a as j,e as g}from"./card.5c9e26d9.js";import{B as y}from"./button.106a523c.js";import{Badge as C}from"./badge.aa4352d0.js";import{ProductPaymentForm as N}from"./ProductPaymentForm.4c242d12.js";import{u as b}from"./PaymentForm.cd9f53da.js";import"./index.9370a71d.js";import"./index.7ef91352.js";import"./input.e1ecff9e.js";import"./label.1e59a270.js";import"./index.8f609134.js";import"./index.e2f97c53.js";import"./data.745a8473.js";import"./createLucideIcon.b27e170f.js";import"./index.1f3fba3a.js";import"./index.5fb5c8e9.js";import"./index.3dde182b.js";import"./index.7f78662f.js";import"./index.eb6f9136.js";import"./index.7dd184f8.js";import"./x.deec9580.js";import"./use-toast.9f8ff5c3.js";import"./credit-card.271c7e58.js";import"./alert-dialog.254035c4.js";function W({product:t,businessId:r}){const[n,a]=m.useState(!1),[l,c]=m.useState(1),{toast:o}=b(),s=t.inStock??!0,p=i=>{o({title:"Â¡Compra exitosa!",description:"Tu pedido ha sido procesado correctamente."}),a(!1)},d=i=>{o({variant:"destructive",title:"Error en la compra",description:i.message})};return e.jsxs(e.Fragment,{children:[e.jsxs(x,{className:"overflow-hidden h-full flex flex-col",children:[e.jsxs("a",{href:r?`/business/${r}?product=${t.id}`:"#",className:"block",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}),e.jsx(C,{variant:s?"secondary":"outline",className:"absolute top-2 right-2",children:s?"Disponible":"Agotado"})]}),e.jsxs(f,{className:"pb-2",children:[e.jsx(h,{className:"text-lg",children:t.name}),e.jsx(u,{children:t.category})]}),e.jsx(j,{className:"pb-2 flex-grow",children:e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description})})]}),e.jsxs(g,{className:"flex justify-between items-center pt-0",children:[e.jsxs("span",{className:"font-semibold",children:["$",t.price.toFixed(2)]}),e.jsx(y,{size:"sm",onClick:()=>a(!0),disabled:!s,children:s?"Ordenar":"Agotado"})]})]}),e.jsx(N,{product:t,quantity:l,isOpen:n,onClose:()=>a(!1),onSuccess:p,onError:d,onQuantityChange:c,maxQuantity:t.maxQuantity,businessId:r})]})}export{W as ProductCard};
